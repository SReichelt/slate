%../../../../logics/hlm%

/**
 * @remarks This definition requires both categories to live in a common universe, which is not strictly required.
 *
 * @references * https://en.wikipedia.org/wiki/Functor
 *             * https://ncatlab.org/nlab/show/functor
 */
$Functors(
  U: %Symbol(auto = %true),
  ğ“’: %Element($../Categories(U = {U})),
  ğ““: %Element(%previous)
): %Construction {
  $functor(
    ğ—: %Binding(
      $../Objects(
        U = {U},
        ğ“’ = {ğ“’}
      ),
      #(ğƒ: %Element($../Objects(
        U = {U},
        ğ“’ = {ğ““}
      )))
    ),
    ğ˜: %Binding(
      $../Objects(
        U = {U},
        ğ“’ = {ğ“’}
      ),
      #(ğ™: %Binding(
        %previous,
        #(f: %Binding(
          $../Morphisms(
            U = {U},
            ğ“’ = {ğ“’},
            ğ— = {ğ˜},
            ğ˜ = {ğ™}
          ),
          #(d: %Element($../Morphisms(
            U = {U},
            ğ“’ = {ğ““},
            ğ— = {ğƒ[ğ˜]},
            ğ˜ = {ğƒ[ğ™]}
          )))
        ))
      ))
    ),
    _1: %Constraint(%forall(
      #(ğ—: %Element($../Objects(
        U = {U},
        ğ“’ = {ğ“’}
      ))),
      %equals(
        d[
          ğ—,
          ğ—,
          $../identity(
            U = {U},
            ğ“’ = {ğ“’},
            ğ— = {ğ—}
          )
        ],
        $../identity(
          U = {U},
          ğ“’ = {ğ““},
          ğ— = {ğƒ[ğ—]}
        )
      )
    )),
    _2: %Constraint(%forall(
      #(
        ğ—: %Element($../Objects(
          U = {U},
          ğ“’ = {ğ“’}
        )),
        ğ˜: %Element(%previous),
        ğ™: %Element(%previous),
        f: %Element($../Morphisms(
          U = {U},
          ğ“’ = {ğ“’},
          ğ— = {ğ—},
          ğ˜ = {ğ˜}
        )),
        g: %Element($../Morphisms(
          U = {U},
          ğ“’ = {ğ“’},
          ğ— = {ğ˜},
          ğ˜ = {ğ™}
        ))
      ),
      %equals(
        d[
          ğ—,
          ğ™,
          $../composition(
            U = {U},
            ğ“’ = {ğ“’},
            ğ— = {ğ—},
            ğ˜ = {ğ˜},
            ğ™ = {ğ™},
            g = {g},
            f = {f}
          )
        ],
        $../composition(
          U = {U},
          ğ“’ = {ğ““},
          ğ— = {ğƒ[ğ—]},
          ğ˜ = {ğƒ[ğ˜]},
          ğ™ = {ğƒ[ğ™]},
          g = {d[ğ˜,ğ™,g]},
          f = {d[ğ—,ğ˜,f]}
        )
      )
    ))
  ): %Constructor {
    display = [$Parens(
      body = $Table(
        items = [
          [
            $InnerParens(
              body = ğ“’,
              maxLevel = 0
            ),
            'â€‰â†’â€‰',
            $InnerParens(
              body = ğ““,
              maxLevel = 0
            )
          ],
          [ğ—, 'â€‰â†¦â€‰', ğƒ],
          [
            $Parens(
              body = $FunctionDefinition(
                function = f,
                symbol = 'â†’',
                operands = [ğ˜, ğ™]
              ),
              style = '()'
            ),
            'â€‰â†¦â€‰',
            d
          ]
        ],
        style = 'aligned'
      ),
      style = '()'
    )],
    definitionDisplay = {
      parameter = #(F: %Expr),
      display = [$FunctionPrefix(
        function = F,
        body = [
          'â€Š',
          $Table(
            items = [
              [
                $InnerParens(
                  body = ğ“’,
                  maxLevel = 0
                ),
                'â€‰â†’â€‰',
                $InnerParens(
                  body = ğ““,
                  maxLevel = 0
                )
              ],
              [ğ—, 'â€‰â†¦â€‰', ğƒ],
              [
                $Parens(
                  body = $FunctionDefinition(
                    function = f,
                    symbol = 'â†’',
                    operands = [ğ˜, ğ™]
                  ),
                  style = '()'
                ),
                'â€‰â†¦â€‰',
                d
              ]
            ],
            style = 'aligned'
          )
        ]
      )]
    },
    equalityDefinition = {
      leftParameters = #(
        ğ—: %Binding(
          $../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ),
          #(ğƒ: %Element($../Objects(
            U = {U},
            ğ“’ = {ğ““}
          )))
        ),
        ğ˜: %Binding(
          $../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ),
          #(ğ™: %Binding(
            %previous,
            #(f: %Binding(
              $../Morphisms(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ˜},
                ğ˜ = {ğ™}
              ),
              #(d: %Element($../Morphisms(
                U = {U},
                ğ“’ = {ğ““},
                ğ— = {ğƒ[ğ˜]},
                ğ˜ = {ğƒ[ğ™]}
              )))
            ))
          ))
        ),
        _1: %Constraint(%forall(
          #(ğ—: %Element($../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ))),
          %equals(
            d[
              ğ—,
              ğ—,
              $../identity(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ—}
              )
            ],
            $../identity(
              U = {U},
              ğ“’ = {ğ““},
              ğ— = {ğƒ[ğ—]}
            )
          )
        )),
        _2: %Constraint(%forall(
          #(
            ğ—: %Element($../Objects(
              U = {U},
              ğ“’ = {ğ“’}
            )),
            ğ˜: %Element(%previous),
            ğ™: %Element(%previous),
            f: %Element($../Morphisms(
              U = {U},
              ğ“’ = {ğ“’},
              ğ— = {ğ—},
              ğ˜ = {ğ˜}
            )),
            g: %Element($../Morphisms(
              U = {U},
              ğ“’ = {ğ“’},
              ğ— = {ğ˜},
              ğ˜ = {ğ™}
            ))
          ),
          %equals(
            d[
              ğ—,
              ğ™,
              $../composition(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ—},
                ğ˜ = {ğ˜},
                ğ™ = {ğ™},
                g = {g},
                f = {f}
              )
            ],
            $../composition(
              U = {U},
              ğ“’ = {ğ““},
              ğ— = {ğƒ[ğ—]},
              ğ˜ = {ğƒ[ğ˜]},
              ğ™ = {ğƒ[ğ™]},
              g = {d[ğ˜,ğ™,g]},
              f = {d[ğ—,ğ˜,f]}
            )
          )
        ))
      ),
      rightParameters = #(
        ğ—: %Binding(
          $../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ),
          #("ğƒ'": %Element($../Objects(
            U = {U},
            ğ“’ = {ğ““}
          )))
        ),
        ğ˜: %Binding(
          $../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ),
          #(ğ™: %Binding(
            %previous,
            #(f: %Binding(
              $../Morphisms(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ˜},
                ğ˜ = {ğ™}
              ),
              #("d'": %Element($../Morphisms(
                U = {U},
                ğ“’ = {ğ““},
                ğ— = {"ğƒ'"[ğ˜]},
                ğ˜ = {"ğƒ'"[ğ™]}
              )))
            ))
          ))
        ),
        _1: %Constraint(%forall(
          #(ğ—: %Element($../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ))),
          %equals(
            "d'"[
              ğ—,
              ğ—,
              $../identity(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ—}
              )
            ],
            $../identity(
              U = {U},
              ğ“’ = {ğ““},
              ğ— = {"ğƒ'"[ğ—]}
            )
          )
        )),
        _2: %Constraint(%forall(
          #(
            ğ—: %Element($../Objects(
              U = {U},
              ğ“’ = {ğ“’}
            )),
            ğ˜: %Element(%previous),
            ğ™: %Element(%previous),
            f: %Element($../Morphisms(
              U = {U},
              ğ“’ = {ğ“’},
              ğ— = {ğ—},
              ğ˜ = {ğ˜}
            )),
            g: %Element($../Morphisms(
              U = {U},
              ğ“’ = {ğ“’},
              ğ— = {ğ˜},
              ğ˜ = {ğ™}
            ))
          ),
          %equals(
            "d'"[
              ğ—,
              ğ™,
              $../composition(
                U = {U},
                ğ“’ = {ğ“’},
                ğ— = {ğ—},
                ğ˜ = {ğ˜},
                ğ™ = {ğ™},
                g = {g},
                f = {f}
              )
            ],
            $../composition(
              U = {U},
              ğ“’ = {ğ““},
              ğ— = {"ğƒ'"[ğ—]},
              ğ˜ = {"ğƒ'"[ğ˜]},
              ğ™ = {"ğƒ'"[ğ™]},
              g = {"d'"[ğ˜,ğ™,g]},
              f = {"d'"[ğ—,ğ˜,f]}
            )
          )
        ))
      ),
      definition = [%and(
        %forall(
          #(ğ—: %Element($../Objects(
            U = {U},
            ğ“’ = {ğ“’}
          ))),
          %equals(ğƒ[ğ—], "ğƒ'"[ğ—])
        ),
        %forall(
          #(
            ğ˜: %Element($../Objects(
              U = {U},
              ğ“’ = {ğ“’}
            )),
            ğ™: %Element(%previous),
            f: %Element($../Morphisms(
              U = {U},
              ğ“’ = {ğ“’},
              ğ— = {ğ˜},
              ğ˜ = {ğ™}
            ))
          ),
          %equals(d[ğ˜,ğ™,f], "d'"[ğ˜,ğ™,f])
        )
      )],
      isomorphic = %true
    }
  }

  display = [$FunctionOperator(
    symbol = 'â†’',
    operands = [ğ“’, ğ““],
    minParenLevel = -1
  )],
  definitionDisplay = {
    parameter = #(F: %Expr),
    display = [$FunctionDefinition(
      function = F,
      symbol = 'â†’',
      operands = [ğ“’, ğ““]
    )],
    singularName = 'functor',
    pluralName = 'functors',
    nameOptional = %true
  }
}
